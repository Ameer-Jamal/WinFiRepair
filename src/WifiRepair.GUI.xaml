<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="WinFiRepair - A.Jamal" Height="500" Width="800"
        WindowStartupLocation="CenterScreen" ResizeMode="CanMinimize"
        Background="{DynamicResource App.Background}"
        Foreground="{DynamicResource App.Text}"
        Icon="WifiRepair.ico">

  <Window.Resources>
    <!-- Dark palette -->
    <SolidColorBrush x:Key="App.Background" Color="#1E1E1E"/>
    <SolidColorBrush x:Key="App.Panel"      Color="#252526"/>
    <SolidColorBrush x:Key="App.Text"       Color="#D4D4D4"/>
    <SolidColorBrush x:Key="App.Border"     Color="#3C3C3C"/>
    <SolidColorBrush x:Key="App.Accent"     Color="#0E639C"/>

    <!-- Apply dark colors to popups/menus -->
    <SolidColorBrush x:Key="{x:Static SystemColors.WindowBrushKey}"        Color="#252526"/>
    <SolidColorBrush x:Key="{x:Static SystemColors.WindowTextBrushKey}"    Color="#D4D4D4"/>
    <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}"       Color="#2D2D30"/>
    <SolidColorBrush x:Key="{x:Static SystemColors.ControlTextBrushKey}"   Color="#D4D4D4"/>
    <SolidColorBrush x:Key="{x:Static SystemColors.GrayTextBrushKey}"      Color="#A0A0A0"/>
    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}"     Color="#094771"/>
    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="#FFFFFF"/>

    <!-- Base control styles -->
    <Style TargetType="Label">
      <Setter Property="Foreground" Value="{DynamicResource App.Text}"/>
    </Style>

    <Style TargetType="TextBox">
      <Setter Property="Background" Value="{DynamicResource App.Panel}"/>
      <Setter Property="Foreground" Value="{DynamicResource App.Text}"/>
      <Setter Property="BorderBrush" Value="{DynamicResource App.Border}"/>
      <Setter Property="CaretBrush" Value="{DynamicResource App.Text}"/>
    </Style>

    <!-- spacing for all buttons -->
    <Style TargetType="Button">
      <Setter Property="Background" Value="#2D2D30"/>
      <Setter Property="Foreground" Value="{DynamicResource App.Text}"/>
      <Setter Property="BorderBrush" Value="{DynamicResource App.Border}"/>
      <Setter Property="Padding" Value="10,8"/>
      <Setter Property="Margin" Value="0,0,12,12"/>
    </Style>

    <!-- ComboBox styling: dark dropdown  -->
    <Style TargetType="ComboBox">
      <Setter Property="Background" Value="{DynamicResource App.Panel}"/>
      <Setter Property="Foreground" Value="{DynamicResource App.Text}"/>
      <Setter Property="BorderBrush" Value="{DynamicResource App.Border}"/>
      <!-- text for the selection area -->
      <Setter Property="Foreground" Value="Black"/>
      <Setter Property="ItemTemplate">
        <Setter.Value>
          <DataTemplate>
            <!-- Red text for items in the popup -->
            <TextBlock Text="{Binding}" Foreground="Black"/>
          </DataTemplate>
        </Setter.Value>
      </Setter>
      <Setter Property="ItemContainerStyle">
        <Setter.Value>
          <Style TargetType="ComboBoxItem">
            <Setter Property="Background" Value="{DynamicResource App.Panel}"/>
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="BorderBrush" Value="{DynamicResource App.Border}"/>
            <Setter Property="Padding" Value="6,4"/>
            <Setter Property="Template">
              <Setter.Value>
                <ControlTemplate TargetType="ComboBoxItem">
                  <Border x:Name="Bd"
                          Background="{TemplateBinding Background}"
                          BorderBrush="{TemplateBinding BorderBrush}"
                          BorderThickness="1"
                          Padding="{TemplateBinding Padding}">
                    <ContentPresenter/>
                  </Border>
                  <ControlTemplate.Triggers>
                    <Trigger Property="IsHighlighted" Value="True">
                      <Setter TargetName="Bd" Property="Background" Value="{DynamicResource App.Accent}"/>
                      <Setter Property="Foreground" Value="White"/>
                    </Trigger>
                    <Trigger Property="IsSelected" Value="True">
                      <Setter TargetName="Bd" Property="Background" Value="{DynamicResource App.Accent}"/>
                      <Setter Property="Foreground" Value="White"/>
                    </Trigger>
                  </ControlTemplate.Triggers>
                </ControlTemplate>
              </Setter.Value>
            </Setter>
          </Style>
        </Setter.Value>
      </Setter>
    </Style>
  </Window.Resources>

  <Grid Margin="12">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="Auto"/>
      <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>

    <Label Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" Content="Adapter:" Margin="0,0,8,0"/>
    <ComboBox x:Name="cmbAdapter" Grid.Row="0" Grid.Column="1" Height="30"/>

    <Label Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" Content="SSID (optional):" Margin="0,4,8,0"/>
    <TextBox x:Name="txtSsid" Grid.Row="1" Grid.Column="1" Margin="0,4,0,0" Height="30"/>

    <WrapPanel Grid.Row="2" Grid.ColumnSpan="2" Margin="0,14,0,8">
      <Button x:Name="btnDiag" Content="Diagnose" Width="120"/>
      <Button x:Name="btnBackup" Content="Backup Now" Width="120"/>
      <Button x:Name="btnSafe" Content="Safe Repair" Width="130"/>
      <Button x:Name="btnAgg"  Content="Aggressive Reset" Width="160"/>
      <Button x:Name="btnRollbackLatest" Content="Rollback Latest" Width="140"/>
      <Button x:Name="btnRollbackChoose" Content="Rollback..." Width="120"/>
    </WrapPanel>

    <TextBox x:Name="txtLog" Grid.Row="3" Grid.ColumnSpan="2"
             FontFamily="Cascadia Mono,Consolas,Segoe UI"
             IsReadOnly="True" AcceptsReturn="True" VerticalScrollBarVisibility="Auto"
             Background="{DynamicResource App.Panel}" TextWrapping="NoWrap"/>
  </Grid>
</Window>
